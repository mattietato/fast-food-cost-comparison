<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cost-Saving Meal Planner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #FFF5E4;
            color: #242331;
        }
        #common-ingredients {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .ingredient-card {
            border: 1px solid #C1D8C3;
            padding: 10px;
            margin: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .ingredient-card.selected {
            background-color: #6A9C89;
            color: white;
        }
        button {
            background-color: #CD5C08;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
            display: inline-block; /* Ensures button visibility */
        }
        button:hover {
            background-color: #A27035;
        }
        .hidden {
            display: none;
        }
        #meal-table {
            margin-top: 20px;
            border-collapse: collapse;
            width: 100%;
        }
        #meal-table th, #meal-table td {
            border: 1px solid #C1D8C3;
            padding: 8px;
            text-align: left;
        }
        .missing {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Cost-Saving Meal Planner</h1>
    <div id="ingredient-selection">
        <h2>Select Ingredients You Have</h2>
        <div id="common-ingredients"></div>
        <button id="submit-ingredients" class="hidden">Next</button>
    </div>

    <div id="meal-table-container" class="hidden">
        <h2>Missing Ingredients and Prices</h2>
        <div id="meal-table"></div>
    </div>

    <script>
        const commonIngredientsList = [
            "Tomato", "Onion", "Garlic", "Chicken", "Beef", "Pork", "Rice", 
            "Pasta", "Spinach", "Carrot", "Potato", "Broccoli", "Pepper", 
            "Cheese", "Egg", "Milk", "Butter", "Salt", "Pepper", "Olive Oil", 
            "Soy Sauce", "Lentils", "Canned Beans", "Frozen Veggies", "Tuna"
        ];

        const healthyMeals = [
            {
                name: "Stir-Fried Vegetables",
                ingredients: ["Vegetables", "Soy Sauce", "Rice"],
                prices: {
                    "Store A": 3.50,
                    "Store B": 4.00,
                    "Store C": 3.75
                },
                recipe: "1. Cook rice according to package instructions.\n2. Stir-fry vegetables in soy sauce."
            },
            // Add more recipes as needed
        ];

        function renderCommonIngredients() {
            const commonIngredientsDiv = document.getElementById('common-ingredients');
            commonIngredientsDiv.innerHTML = '';

            commonIngredientsList.forEach(ingredient => {
                const div = document.createElement('div');
                div.textContent = ingredient;
                div.className = 'ingredient-card';
                div.addEventListener('click', () => {
                    div.classList.toggle('selected');
                    const anySelected = document.querySelector('.ingredient-card.selected');
                    document.getElementById('submit-ingredients').classList.toggle('hidden', !anySelected);
                });
                commonIngredientsDiv.appendChild(div);
            });
        }

        document.getElementById('submit-ingredients').addEventListener('click', function() {
            const selectedIngredients = Array.from(document.querySelectorAll('.ingredient-card.selected')).map(card => card.textContent);
            const matchingRecipes = healthyMeals.filter(meal => 
                meal.ingredients.some(ingredient => selectedIngredients.includes(ingredient))
            );

            if (matchingRecipes.length > 0) {
                showMissingIngredientsTable(matchingRecipes, selectedIngredients);
            } else {
                alert("No matching recipes found with the selected ingredients.");
            }
        });

        function showMissingIngredientsTable(recipes, selectedIngredients) {
            const mealTable = document.getElementById('meal-table');
            let tableHTML = `<table>
                <tr>
                    <th>Recipe</th>
                    <th>Missing Ingredients</th>
                    <th>Prices</th>
                </tr>`;

            recipes.forEach(recipe => {
                const missingIngredients = recipe.ingredients.filter(ing => !selectedIngredients.includes(ing));
                const priceString = Object.entries(recipe.prices)
                    .map(([store, price]) => `${store}: $${price.toFixed(2)}`).join('<br>');
                
                tableHTML += `<tr>
                    <td>${recipe.name}</td>
                    <td class="missing">${missingIngredients.join(', ')}</td>
                    <td>${priceString}</td>
                </tr>`;
            });

            tableHTML += `</table>`;
            mealTable.innerHTML = tableHTML;
            document.getElementById('meal-table-container').classList.remove('hidden');
        }

        renderCommonIngredients();
    </script>
</body>
</html>
